<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>REBUILT 2026 â€” Elite Scouting</title>
  <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
  <style>
    :root{ --accent:#0b69ff; --muted:#666; --bg:#fafafa; --card:#fff; --pad:12px; }
    body{ font-family: Inter, system-ui, Arial, sans-serif; background: var(--bg); margin: 14px; display:flex; justify-content:center; }
    .wrap{ width:100%; max-width:980px; background:var(--card); padding:18px; border-radius:12px; box-shadow:0 6px 20px rgba(10,10,10,0.06); }
    .section-card { padding:var(--pad); border-radius:10px; background:#fff; border:1px solid #f0f0f5; margin-bottom: 15px; }
    label{ display:block; font-weight:600; margin-top:8px; color:var(--muted); font-size:13px; }
    input[type="number"], select, textarea { width:100%; padding:10px; margin-top:6px; border-radius:8px; border:1px solid #e6e6ee; font-size:14px; }
    .counter-row{ display:flex; align-items:center; justify-content:space-between; padding:10px; background:#fbfbff; border-radius:8px; margin-bottom: 8px; }
    .btn-counter { width:40px; height:40px; border-radius:8px; border:none; background:var(--accent); color:#fff; font-weight:700; cursor:pointer; }
    .num-display { min-width:50px; text-align:center; font-weight:700; font-size:1.2em; }
    .checkbox-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
    .check-item { display: flex; align-items: center; gap: 8px; font-size: 14px; }
    .primary-btn { width:100%; background:var(--accent); color:#fff; border:none; padding:15px; border-radius:8px; cursor:pointer; font-weight:bold; font-size:1.1em; }
    #qrcode { margin-top:20px; display: flex; justify-content: center; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>REBUILT 2026 Scout</h1>
    
    <div style="margin-bottom: 20px; text-align: center;">
      <a href="/scanner" style="padding: 10px 15px; margin: 0 5px; background: #0b69ff; color: white; text-decoration: none; border-radius: 5px; display: inline-block;">QR Scanner</a>
      <a href="/data-display" style="padding: 10px 15px; margin: 0 5px; background: #0b69ff; color: white; text-decoration: none; border-radius: 5px; display: inline-block;">Data Display</a>
    </div>

    <div class="section-card">
      <label>Match & Team</label>
      <div style="display:flex;gap:8px;">
        <input id="match" type="number" placeholder="Match #" />
        <input id="team" type="number" placeholder="Team #" />
      </div>
      <label style="margin-top:10px;">Alliance</label>
      <select id="alliance">
        <option value="red">Red Alliance</option>
        <option value="blue">Blue Alliance</option>
      </select>
    </div>

    <div class="section-card">
      <h3>Autonomous</h3>
      <div class="counter-row">
        <div><strong>Auto Fuel</strong></div>
        <div style="display:flex; align-items:center; gap:10px;">
          <button class="btn-counter" onclick="changeQty('auto_fuel', -1)">-</button>
          <input type="number" id="auto_fuel-val" class="num-display" value="0" onchange="setQty('auto_fuel', this.value)" />
          <button class="btn-counter" onclick="changeQty('auto_fuel', 1)">+1</button>
          <button class="btn-counter" style="background:#e67e22; width:60px;" onclick="changeQty('auto_fuel', 8)">+8</button>
        </div>
      </div>
      <div class="check-item" style="margin-top:10px;">
        <input type="checkbox" id="auto_climb"> <strong>Auto Climb (L1)</strong>
      </div>
    </div>

    <div class="section-card">
      <h3>Teleop Scoring (Fuel)</h3>
      <div class="counter-row">
        <div><strong>Fuel Balls</strong></div>
        <div style="display:flex; align-items:center; gap:10px;">
          <button class="btn-counter" onclick="changeQty('fuel', -1)">-</button>
          <input type="number" id="fuel-val" class="num-display" value="0" onchange="setQty('fuel', this.value)" />
          <button class="btn-counter" onclick="changeQty('fuel', 1)">+1</button>
          <button class="btn-counter" style="background:#e67e22; width:60px;" onclick="changeQty('fuel', 5)">+5</button>
        </div>
      </div>
      <div class="counter-row" style="margin-top: 8px;">
        <div><strong>Balls Passed to Alliance</strong></div>
        <div style="display:flex; align-items:center; gap:10px;">
          <button class="btn-counter" onclick="changeQty('alliance_pass', -1)">-</button>
          <input type="number" id="alliance_pass-val" class="num-display" value="0" onchange="setQty('alliance_pass', this.value)" />
          <button class="btn-counter" onclick="changeQty('alliance_pass', 1)">+1</button>
          <button class="btn-counter" style="background:#e67e22; width:60px;" onclick="changeQty('alliance_pass', 5)">+5</button>
        </div>
      </div>
    </div>

    <div class="section-card">
      <h3>Capabilities</h3>
      <div class="checkbox-grid">
        <div class="check-item"><input type="checkbox" id="turret"> Turreted?</div>
        <div class="check-item"><input type="checkbox" id="trench"> Under Trench?</div>
        <div class="check-item"><input type="checkbox" id="defense"> Playing Defense?</div>
      </div>
    </div>

    <div class="section-card">
      <h3>Endgame Tower</h3>
      <select id="climb">
        <option value="no_climb">No Climb</option>
        <option value="L1">L1 - Level 1 (10 pts)</option>
        <option value="L2">L2 - Level 2 (20 pts)</option>
        <option value="L3">L3 - Level 3 (30 pts)</option>
      </select>
    </div>

    <div style="margin-top: 20px;">
    <label for="notes" style="font-weight: bold;">Notes:</label>
    <textarea id="notes" name="notes" rows="4" style="width: 100%; border: 1px solid #ccc; border-radius: 5px; padding: 10px;" placeholder="Enter any additional notes here..."></textarea>
  </div>

    <button onclick="resetPage()" style="margin-bottom: 20px; background-color: #e74c3c; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; width: 100%;">Clear</button>
    <button class="primary-btn" onclick="generateQR()">Generate Match QR</button>
    <div id="qrcode"></div>
  </div>

<script>
    // Initialize dataState object
    const dataState = {
      auto_fuel: 0,
      fuel: 0,
      alliance_pass: 0
    };

    function changeQty(id, delta) {
      dataState[id] = Math.max(0, dataState[id] + delta);
      document.getElementById(id + '-val').value = dataState[id];
    }

    function setQty(id, value) {
      const numericValue = Math.max(0, parseInt(value) || 0);
      dataState[id] = numericValue;
      document.getElementById(id + '-val').value = numericValue;
    }

    function generateQR() {
      const payload = {
        match: Number(document.getElementById('match').value),
        team: Number(document.getElementById('team').value),
        fuel_balls: dataState.fuel,
        auto_fuel: dataState.auto_fuel,
        alliance_pass: dataState.alliance_pass,
        auto_climb: document.getElementById('auto_climb').checked ? 1 : 0,
        is_turreted: document.getElementById('turret').checked ? 1 : 0,
        fits_trench: document.getElementById('trench').checked ? 1 : 0,
        defense: document.getElementById('defense').checked ? 1 : 0,
        climb: document.getElementById('climb').value,
        alliance: document.getElementById('alliance').value,
        notes: document.getElementById('notes').value || ""
      };

      document.getElementById('qrcode').innerHTML = "";
      new QRCode(document.getElementById("qrcode"), {
        text: JSON.stringify(payload),
        width: 250, height: 250
      });
    }

    function resetPage() {
      // Reset dataState values
      for (const key in dataState) {
        dataState[key] = 0;
      }
      
      // Reset input displays
      document.getElementById('auto_fuel-val').value = 0;
      document.getElementById('fuel-val').value = 0;
      document.getElementById('alliance_pass-val').value = 0;

      // Uncheck all checkboxes
      const checkboxes = document.querySelectorAll('input[type="checkbox"]');
      checkboxes.forEach(checkbox => checkbox.checked = false);
      
      // Reset match/team inputs
      document.getElementById('match').value = '';
      document.getElementById('team').value = '';
      
      // Reset dropdowns
      document.getElementById('alliance').value = 'red';
      document.getElementById('climb').value = 'no_climb';
      
      // Reset notes
      document.getElementById('notes').value = '';
    }
</script>
</body>
</html>